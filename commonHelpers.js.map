{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".search-img-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\n// Validate status of response\nfunction fetchImages(url){\n    return fetch(url)\n        .then((response) => {\n            if (response.ok) {\n                return response.json();\n            } else {\n                throw new Error(response.status);\n            }\n        });\n};\n\n//Create gallery markup\nfunction galleryMarkup(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"image-info\">\n              <p class=\"likes\">Likes ${likes}</p>\n              <p class=\"views\">Views ${views}</p>\n              <p class=\"comments\">Comments ${comments}</p>\n              <p class=\"downloas\">Downloas ${downloads}</p>\n            </div>\n          </a>\n        </li>`\n    ).join(\"\");\n    return markup\n}; \n\nform.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    loader.classList.remove(\"hidden\");\n        \n    const searchParams = new URLSearchParams({\n        key: \"41836139-8e3290e3b09a716b148135a6e\",\n        q: form.elements.search.value,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    });\n    \n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    fetchImages(url)\n        .then((res) => {\n            const resHits = res.hits;\n            gallery.insertAdjacentHTML(\"afterbegin\", galleryMarkup(resHits))\n            \n            lightbox.refresh();\n                \n            if (resHits.length === 0) {\n                iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\"\n                })\n            }\n        })\n        .finally(() => loader.classList.add(\"hidden\"))\n    \n    form.reset();\n})\n"],"names":["form","gallery","loader","lightbox","SimpleLightbox","fetchImages","url","response","galleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","e","res","resHits","iziToast"],"mappings":"6vBAOA,MAAMA,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAG5F,SAASC,EAAYC,EAAI,CACrB,OAAO,MAAMA,CAAG,EACX,KAAMC,GAAa,CAChB,GAAIA,EAAS,GACT,OAAOA,EAAS,OAEhB,MAAM,IAAI,MAAMA,EAAS,MAAM,CAE/C,CAAS,CACT,CAGA,SAASC,EAAcC,EAAQ,CAc3B,OAbeA,EAAO,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC/F;AAAA,0CACkCL;AAAA,8CACID,WAAsBE;AAAA;AAAA,uCAE7BC;AAAA,uCACAC;AAAA,6CACMC;AAAA,6CACAC;AAAA;AAAA;AAAA,cAI7C,EAAM,KAAK,EAAE,CAEb,CAEAhB,EAAK,iBAAiB,SAAWiB,GAAM,CACnCA,EAAE,eAAc,EAChBhB,EAAQ,UAAY,GACpBC,EAAO,UAAU,OAAO,QAAQ,EAUhC,MAAMI,EAAM,4BARS,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGN,EAAK,SAAS,OAAO,MACxB,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,IAIDK,EAAYC,CAAG,EACV,KAAMY,GAAQ,CACX,MAAMC,EAAUD,EAAI,KACpBjB,EAAQ,mBAAmB,aAAcO,EAAcW,CAAO,CAAC,EAE/DhB,EAAS,QAAO,EAEZgB,EAAQ,SAAW,GACnBC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC9B,CAAiB,CAEjB,CAAS,EACA,QAAQ,IAAMlB,EAAO,UAAU,IAAI,QAAQ,CAAC,EAEjDF,EAAK,MAAK,CACd,CAAC"}